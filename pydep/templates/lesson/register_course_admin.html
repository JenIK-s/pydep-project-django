{% extends 'base.html' %}
{% load static %}

{% block title %}
    Заявки на курсы
{% endblock %}

{% block static %}
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<style>
    .request-card {
        border-radius: 15px;
        overflow: hidden;
        box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        margin-bottom: 25px;
        transition: transform 0.3s;
    }

    .request-card:hover {
        transform: translateY(-8px);
    }

    .user-img {
        width: 100%;
        height: 200px;
        object-fit: cover;
    }

    .badge-status {
        font-size: 0.9rem;
        margin-bottom: 10px;
    }

    .btn-rounded {
        border-radius: 20px;
        padding: 5px 15px;
    }
    .empty-message {
        max-width: 600px;
        margin: 80px auto;
        padding: 40px;
        text-align: center;
        background-color: #f8f9fa;
        border-radius: 20px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
        font-size: 1.2rem;
        color: #6c757d;
    }
</style>
{% endblock %}

{% block content %}
<div class="container py-5">
    <div class="row justify-content-center">
        {% for elem in queryset %}
            <div class="col-md-6 col-lg-4">
                <div class="card request-card">
                    <img class="user-img" src="{{ elem.user.image.url }}" alt="{{ elem.user.get_full_name }}">
                    <div class="card-body text-center">
                        <h5 class="card-title">{{ elem.user.get_full_name }}</h5>
                        <p class="card-text">Курс: <strong>{{ elem.course.name }}</strong></p>

{#                        {% if elem.status == "wait" %}#}
{#                            <span class="badge bg-warning text-dark badge-status">Ожидает рассмотрения</span>#}
{#                            <form method="post" action="{% url 'lesson:register_course_admin' %}">#}
{#                                {% csrf_token %}#}
{#                                <button type="submit" class="btn btn-success btn-rounded" name="action" value="ap_{{ elem.id }}">Принять</button>#}
{#                                <button type="submit" class="btn btn-danger btn-rounded" name="action" value="rj_{{ elem.id }}">Отклонить</button>#}
{#                            </form>#}
{#                        {% else %}#}
{#                            <span class="badge bg-secondary badge-status">Заявка рассмотрена</span>#}
{#                            <form method="post" action="{% url 'lesson:register_course_admin' %}">#}
{#                                {% csrf_token %}#}
{#                                <button type="submit" class="btn btn-outline-danger btn-rounded" name="action" value="dl_{{ elem.id }}">Удалить</button>#}
{#                            </form>#}
{#                        {% endif %}#}
                    </div>
                </div>
            </div>
        {% empty %}
        <div class="empty-message">
                <p class="mb-0">Заявок нет.<br>Пожалуйста, загляните позже или свяжитесь с администратором.</p>
            </div>
        {% endfor %}
    </div>
</div>
{% endblock %}